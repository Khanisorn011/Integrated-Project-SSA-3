create database integrateDatabase;
drop database integrateDatabase;
use integrateDatabase;

create table BRAND_BASE (
	id int auto_increment not null,
    name varchar(30) character set utf8 not null,
    websiteUrl text,
    isActive boolean,
    countryOfOrigin text character set utf8,
    createdOn datetime default now() not null,
    updatedOn datetime default now() on update now() not null,
    check (trim(name) != ''),
    check (length(websiteUrl) <= 40 and trim(name) != ''),
    check (length(countryOfOrigin) <= 80 AND trim(countryOfOrigin) != ''),
    primary key (id)
);

CREATE TABLE SALE_ITEM_BASE (
	id int auto_increment not null,
    brand_id int not null,
    -- brand varchar(30) character set utf8 not null ,
    model varchar(60) character set utf8 not null ,
    description text not null,
    quantity int not null default 1,
    price int not null,
    ramGb int,
    storageGb int,
    screenSizeInch numeric,
    color text character set utf8,
    createdOn datetime default now() not null,
    updatedOn datetime default now() on update now() not null,
    check (trim(model) != ''),
    check (trim(description) != ''),
    check (trim(color) != ''),
    primary key (id),
    foreign key (brand_id) references BRAND_BASE(id)
);

INSERT INTO BRAND_BASE (name, websiteUrl, isActive, countryOfOrigin) VALUES (
    'Samsung',
    'https://www.samsung.com',
    TRUE,
    'South Korea'
);

INSERT INTO SALE_ITEM_BASE (model, brand_id, description, price, ramGb, screenSizeInch, storageGb, color, quantity) VALUES (
    'Galaxy S23 Ultra',
    1,
    '512GB ซีพียูทรงพลัง กล้องเทพๆ รองรับ S-Pen จอใหญ่สะใจ เล่นเกมลื่นสุดๆ',
    32900,
    6,
    6.7,
    256,
    'Phantom Black',
    5
);
